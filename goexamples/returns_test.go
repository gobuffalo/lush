// Code generated by github.com/gobuffalo/lush. DO NOT EDIT.
package goexamples

import (
	"context"
	"io/ioutil"
	"testing"

	"github.com/gobuffalo/lush"
	"github.com/gobuffalo/lush/ast"
	"github.com/gobuffalo/lush/builtins"
	"github.com/stretchr/testify/require"
)

func Test_returnsExec(t *testing.T) {
	r := require.New(t)

	c := ast.NewRuntime(context.Background(), nil)

	s, err := lush.ParseFile("returns.lush")
	r.NoError(err)
	r.True(Equal(c, s.Exec, returnsExec))
}

var returnsBResult *ast.Returned

func Benchmark_returnsExec_Go(t *testing.B) {
	var r *ast.Returned

	for i := 0; i < t.N; i++ {
		c := ast.NewRuntime(context.Background(), nil)
		c.Imports.Store("fmt", builtins.NewFmt(ioutil.Discard))

		r, _ = returnsExec(c)
	}
	returnsBResult = r
}

func Benchmark_returnsExec_Lush(t *testing.B) {
	var r *ast.Returned

	s, err := lush.ParseFile("returns.lush")
	if err != nil {
		t.Fatal(err)
	}

	for i := 0; i < t.N; i++ {
		c := ast.NewRuntime(context.Background(), nil)
		c.Imports.Store("fmt", builtins.NewFmt(ioutil.Discard))

		r, _ = s.Exec(c)
	}
	returnsBResult = r
}
